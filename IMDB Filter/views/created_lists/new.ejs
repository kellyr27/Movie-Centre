<% layout('./layouts/boilerplate') %>
<h4><i>Search Results</i></h4>
<ul>
    <% for (let i = 0; i < searchResults.length; i++) { %>
        <li><%= searchResults[i]['Title'] %>
            <form method="post" id="movieSelector">
                <input type="hidden" name="currentTypedListName">
                <button name="addID" value="<%= searchResults[i]['Const_IMDB'] %>">Add To List</button>
            </form>
        </li>
    <% } %>  
</ul>


<h1>Add New List</h1>
<form action="/created_lists" method="post" id="titleForm">
    <label for="listName">List Name: </label>
    <input type="text" name="listName" id="inputTitle" value="<%= currentTypedListName %>" required>

    <ol>
        <% for (let movie of currentCreatedList) { %>
            <li><%= movie['Title'] %>, <%= movie['Year'] %></li>
            <button>&#x2191</button>
            <button>&#x2193</button>
        <% } %>     
    </ol>

    <button>Submit</button>
</form>
<a href="/created_lists">Back to Created Lists</a>
<script>
    let inputTitle = document.getElementById("inputTitle")
    let titleForm = document.querySelector("#titleForm")
    let name = document.getElementsByName("currentTypedListName")

    inputTitle.oninput = handleInput2
    let currentTitle = ""

    function handleInput2(e) {
        currentTitle = e.target.value
        for (let el of name) {
            el.value = currentTitle
        }
    }
    
</script>